<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Validate Object Using Reflection Inspired by Spring" /><meta name="author" content="MijazzChan" /><meta property="og:locale" content="en" /><meta name="description" content="Inspired by Spring’s excellent dependency injection way of handling bean validation, after reading some official java documentations and Spring Docs, I decided to find a way of achieving the purpose of validating object, but this time, without spring." /><meta property="og:description" content="Inspired by Spring’s excellent dependency injection way of handling bean validation, after reading some official java documentations and Spring Docs, I decided to find a way of achieving the purpose of validating object, but this time, without spring." /><link rel="canonical" href="https://mijazzchan.github.io/posts/Validate-Object-Using-Reflection-Inspired-by-Spring/" /><meta property="og:url" content="https://mijazzchan.github.io/posts/Validate-Object-Using-Reflection-Inspired-by-Spring/" /><meta property="og:site_name" content="Mijazz Chan" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-06-06T15:15:27+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Validate Object Using Reflection Inspired by Spring" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@MijazzChan" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"MijazzChan"},"headline":"Validate Object Using Reflection Inspired by Spring","dateModified":"2022-01-11T07:45:22+08:00","datePublished":"2021-06-06T15:15:27+08:00","description":"Inspired by Spring’s excellent dependency injection way of handling bean validation, after reading some official java documentations and Spring Docs, I decided to find a way of achieving the purpose of validating object, but this time, without spring.","url":"https://mijazzchan.github.io/posts/Validate-Object-Using-Reflection-Inspired-by-Spring/","mainEntityOfPage":{"@type":"WebPage","@id":"https://mijazzchan.github.io/posts/Validate-Object-Using-Reflection-Inspired-by-Spring/"},"@type":"BlogPosting","@context":"https://schema.org"}</script><title>Validate Object Using Reflection Inspired by Spring | Mijazz Chan</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Mijazz Chan"><meta name="application-name" content="Mijazz Chan"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/avatars/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Mijazz Chan</a></div><div class="site-subtitle font-italic">Code with Passion</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/MijazzChan" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://www.linkedin.com/in/%E9%99%88%E6%B5%A9%E9%AA%8F-mijazz/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['mijazz','qq.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Validate Object Using Reflection Inspired by Spring</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Validate Object Using Reflection Inspired by Spring</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/MijazzChan">Mijazz Chan</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2021-06-06 15:15:27 +0800" data-toggle="tooltip" data-placement="bottom" title="Sun, Jun 6, 2021, 3:15 PM +0800" >Jun 6, 2021</em> </span> <span> Updated <em class="timeago" date="2022-01-11 07:45:22 +0800 " data-toggle="tooltip" data-placement="bottom" title="Tue, Jan 11, 2022, 7:45 AM +0800" >Jan 11</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1976 words"> <em>10 min</em> read</span></div></div></div><div class="post-content"><p>Inspired by Spring’s excellent dependency injection way of handling bean validation, after reading some official java documentations and Spring Docs, I decided to find a way of achieving the purpose of validating object, but this time, <strong>without spring</strong>.</p><p>Since no Spring will be involved this time, this post will mainly focusing on Java’s own <code class="language-plaintext highlighter-rouge">Reflection</code> API. And also I will re-use some great pattern inside Spring. Haven’t seen my last post? Check out <a href="/posts/From-Spring-Boot-Bean-Validation-to-Python-Wrapper/">HERE</a>.</p><blockquote><p><code class="language-plaintext highlighter-rouge">Effective Java - Third Edition</code></p><p><code class="language-plaintext highlighter-rouge">Java Documentation - Reflection</code></p><p><code class="language-plaintext highlighter-rouge">Spring Documentation - 5.3.7</code></p></blockquote><h2 id="intro">Intro<a href="#intro" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Remember how I design my own annotation <code class="language-plaintext highlighter-rouge">@HexColorValue</code> in my last post?</p><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="nd">@Target</span><span class="o">(</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">FIELD</span><span class="o">)</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@Constraint</span><span class="o">(</span><span class="n">validatedBy</span> <span class="o">=</span> <span class="nc">HexColorValueValidator</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">HexColorValue</span> <span class="o">{</span>

    <span class="nc">String</span> <span class="nf">message</span><span class="o">()</span> <span class="k">default</span> <span class="s">"{HexColorValue.inValid}"</span><span class="o">;</span>

    <span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="n">groups</span><span class="o">()</span> <span class="k">default</span> <span class="o">{};</span>

    <span class="nc">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">Payload</span><span class="o">&gt;[]</span> <span class="nf">payload</span><span class="o">()</span> <span class="k">default</span> <span class="o">{};</span>

<span class="o">}</span>

</pre></table></code></div></div><p>It is the <code class="language-plaintext highlighter-rouge">@Constraint</code> annotation that annotated above this exact annotation that gives it magic. It allows Spring to locate the class of our custom validator and inject it on the fly.</p><p>Check out out last validator class itself.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HexColorValueValidator</span> <span class="kd">implements</span> <span class="nc">ConstraintValidator</span><span class="o">&lt;</span><span class="nc">HexColorValue</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Pattern</span> <span class="n">hexColorValuePattern</span> <span class="o">=</span> <span class="nc">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">"^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$"</span><span class="o">);</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isValid</span><span class="o">(</span><span class="nc">String</span> <span class="n">value</span><span class="o">,</span> <span class="nc">ConstraintValidatorContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">hexColorValuePattern</span><span class="o">.</span><span class="na">matcher</span><span class="o">(</span><span class="n">value</span><span class="o">).</span><span class="na">matches</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></table></code></div></div><p>It implements <code class="language-plaintext highlighter-rouge">interface ConstraintValidator&lt;A extends Annotation, T&gt;</code> to <strong>equip</strong> this interface with our custom validation capability. This technique significantly improves the code extendibility horizontally. (Which means you can add a bunch of custom validator without polluting you code with shit ton of utility classes.) <strong>For how to turn this into a spring service, I have illustrated it in the last post, again, check out <a href="/posts/From-Spring-Boot-Bean-Validation-to-Python-Wrapper/">here</a>.</strong></p><p>这样写可以使代码在<strong>水平方向上的延展能力</strong>极大增强. 只需要在需要的地方打上注解, 需要校验的地方用自动注入加入一个验证器, 一行解决且无侵入. 接下来就是在无Spring的情况, 仅用Reflection API来复现逻辑, 摆脱框架.</p><h2 id="custom-annotation">Custom Annotation<a href="#custom-annotation" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Start by creating out own Annotation. I will use <code class="language-plaintext highlighter-rouge">@Ipv4Address</code> as a starter this time.</p><h3 id="ipv4address"><code class="language-plaintext highlighter-rouge">@Ipv4Address</code><a href="#ipv4address" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nd">@Target</span><span class="o">(</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">FIELD</span><span class="o">)</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@ValidateBy</span><span class="o">(</span><span class="n">clazz</span> <span class="o">=</span> <span class="nc">Ipv4AddressValidatorImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">Ipv4Address</span> <span class="o">{</span>
<span class="o">}</span>
</pre></table></code></div></div><p>This annotation requires nothing passing in when it is being annotated. Although pay attention to</p><ul><li><code class="language-plaintext highlighter-rouge">@Target</code>. It means this annotation is annotated above <code class="language-plaintext highlighter-rouge">FIELD</code> (字段).<li><p><code class="language-plaintext highlighter-rouge">RetentionPolicy.RUNTIME</code> means this annotation will still be remained in RUNTIME.</p><li><code class="language-plaintext highlighter-rouge">@ValidateBy</code> is also a custom annotation. Inspired by Spring’s <code class="language-plaintext highlighter-rouge">@Constraint(validateBy=?)</code></ul><h3 id="validateby"><code class="language-plaintext highlighter-rouge">@ValidateBy</code><a href="#validateby" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>When we design our validation logic inside some utils class, it is essential to know what exact Validator Class or Method we will be using and invoking. This piece of information must be grabbed from the constraint annotation. And inspired by Spring. the best place for storing this information is the annotation’s annotation. Because you will never want to add Validator Class everytime you use that annotation.</p><p>Here is the simple example of illustrating the difference.</p><ul><li>No <code class="language-plaintext highlighter-rouge">@ValidateBy</code> on <code class="language-plaintext highlighter-rouge">@Ipv4Adress</code></ul><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="c1">// If </span>
<span class="nd">@Target</span><span class="o">(</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">FIELD</span><span class="o">)</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">Ipv4Address</span><span class="o">{</span>
    <span class="nc">Class</span><span class="o">&lt;?</span> <span class="n">extend</span> <span class="nc">Validator</span><span class="o">&gt;</span> <span class="nf">validateBy</span><span class="o">();</span>
<span class="o">}</span>

<span class="c1">// You will need to assign validateBy everytime you use this annotation.</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">QO</span><span class="o">{</span>
    <span class="nd">@Ipv4Adrress</span><span class="o">(</span><span class="n">validateBy</span><span class="o">=</span><span class="nc">Ipv4AddressValidator</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="nc">String</span> <span class="n">firstIp</span><span class="o">;</span>
    <span class="nd">@Ipv4Adrress</span><span class="o">(</span><span class="n">validateBy</span><span class="o">=</span><span class="nc">Ipv4AddressValidator</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="nc">String</span> <span class="n">secondIp</span><span class="o">;</span>
    <span class="nd">@Ipv4Adrress</span><span class="o">(</span><span class="n">validateBy</span><span class="o">=</span><span class="nc">Ipv4AddressValidator</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="nc">String</span> <span class="n">thirdIp</span><span class="o">;</span>
<span class="o">}</span>
<span class="c1">// You don't want that. </span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">@ValidateBy</code> on <code class="language-plaintext highlighter-rouge">@Ipv4Adress</code></ul><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="nd">@Target</span><span class="o">(</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">FIELD</span><span class="o">)</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@ValidateBy</span><span class="o">(</span><span class="n">clazz</span> <span class="o">=</span> <span class="nc">Ipv4AddressValidatorImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">Ipv4Address</span> <span class="o">{</span>
<span class="o">}</span>

<span class="c1">// You NEED NOT TO assign validateBy everytime you use this annotation.</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">QO</span><span class="o">{</span>
    <span class="nd">@Ipv4Adrress</span>
    <span class="nc">String</span> <span class="n">firstIp</span><span class="o">;</span>
    <span class="nd">@Ipv4Adrress</span>
    <span class="nc">String</span> <span class="n">secondIp</span><span class="o">;</span>
    <span class="nd">@Ipv4Adrress</span>
    <span class="nc">String</span> <span class="n">thirdIp</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>This piece of information should be stored as annotation inside the annotation itself. So, let’s see</strong></p><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@Target</span><span class="o">(</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">ANNOTATION_TYPE</span><span class="o">)</span> <span class="c1">// it means this annotation should be annotated above annotation.</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">ValidateBy</span> <span class="o">{</span>
    <span class="nc">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">Validator</span><span class="o">&lt;?&gt;&gt;</span> <span class="n">clazz</span><span class="o">();</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="validator-implement">Validator Implement<a href="#validator-implement" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>This interface itself only has one method, which is <code class="language-plaintext highlighter-rouge">isValid(T value)</code></p><p><code class="language-plaintext highlighter-rouge">Validator.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Validator</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kt">boolean</span> <span class="nf">isValid</span><span class="o">(</span><span class="no">T</span> <span class="n">value</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>We will implement the capability of validation here. Staring with <code class="language-plaintext highlighter-rouge">Ipv4AdressValidatorImpl</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Ipv4AddressValidatorImpl</span> <span class="kd">implements</span> <span class="nc">Validator</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Pattern</span> <span class="n">v4Pattern</span> <span class="o">=</span> <span class="nc">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">"^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$"</span><span class="o">);</span>

    <span class="kd">public</span> <span class="nf">Ipv4AddressValidatorImpl</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Reflection's getDeclaredConstructor()</span>
    <span class="o">}</span>

    <span class="c1">// Implementation is here.</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isValid</span><span class="o">(</span><span class="nc">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">isValidIpv4Address</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isValidIpv4Address</span><span class="o">(</span><span class="nc">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">v4Pattern</span><span class="o">.</span><span class="na">matcher</span><span class="o">(</span><span class="n">value</span><span class="o">).</span><span class="na">matches</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Now that we have given the capability to interface <code class="language-plaintext highlighter-rouge">Validator</code>.</p><h2 id="service-ify-the-validation">Service-ify the Validation<a href="#service-ify-the-validation" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Spring uses <code class="language-plaintext highlighter-rouge">ValidationFactory</code> to provide validator. For me, a <code class="language-plaintext highlighter-rouge">ValidationProvider</code> is more than enough. <code class="language-plaintext highlighter-rouge">Singleton Pattern</code> is introduced here.</p><h3 id="validationprovider---framework"><code class="language-plaintext highlighter-rouge">ValidationProvider</code> - framework<a href="#validationprovider---framework" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ValidationProvider</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">ValidationProvider</span> <span class="no">INSTANCE</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ValidationProvider</span><span class="o">();</span>
	<span class="c1">// NOTE: SINGLETON PATTERN</span>
    <span class="kd">private</span> <span class="nf">ValidationProvider</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Non-instantiable outside this scope because of this private constructor.</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">ValidationProvider</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="no">INSTANCE</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nc">Collection</span><span class="o">&lt;</span><span class="nc">ViolationException</span><span class="o">&gt;</span> <span class="nf">validate</span><span class="o">(</span><span class="no">T</span> <span class="n">object</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// validation will start here.</span>
    <span class="o">}</span>
</pre></table></code></div></div><h3 id="validationprovider---logic"><code class="language-plaintext highlighter-rouge">ValidationProvider</code> - logic<a href="#validationprovider---logic" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>Before I paste up all the code from <code class="language-plaintext highlighter-rouge">validate(T object)</code>, couple insights of how the validation service are as follows.</p><ul><li><code class="language-plaintext highlighter-rouge">ValidationProvider.getInstance()</code> will allow access from any scope of the project, and ready for validating by calling <code class="language-plaintext highlighter-rouge">validationProvider.validate(object)</code>.<li>Validation Logic can be simply described in the following steps.<ol><li>object is passed into <code class="language-plaintext highlighter-rouge">validate(object)</code><li>Fields that declared inside the object will all be collected using <code class="language-plaintext highlighter-rouge">getDeclaredFields()</code> provided by <code class="language-plaintext highlighter-rouge">java.lang.reflect</code>.<li>If the field is still not accessible after <code class="language-plaintext highlighter-rouge">field.trySetAccessible()</code>, a <code class="language-plaintext highlighter-rouge">ViolationException</code> will be added to the <code class="language-plaintext highlighter-rouge">violationList</code> with corresponding reason.<li>For each field, its annotations will be gathered using <code class="language-plaintext highlighter-rouge">getDeclaredAnnotations()</code>. If the annotation is related to validation, it will try to dig out the <code class="language-plaintext highlighter-rouge">@ValidateBy</code> by following up the annotation “Inheritance link”.<li>If <code class="language-plaintext highlighter-rouge">@ValidateBy</code> can be found, which means the corresponding annotation is a Constraint-Related annotation. Because annotation stores specific Class by using <code class="language-plaintext highlighter-rouge">@ValidateBy(clazz=XXX)</code>, <code class="language-plaintext highlighter-rouge">XXX</code> will be instantiate using <code class="language-plaintext highlighter-rouge">getDeclaredConstructor().newInstance()</code>.<li><code class="language-plaintext highlighter-rouge">"isValid"</code> method will be invoked by reflection API to gather the validation result.</ol><li>You may wonder why <code class="language-plaintext highlighter-rouge">XXX</code> will always have the same <code class="language-plaintext highlighter-rouge">“isValid”</code> method that can be invoked via reflection, that’s exactly the reason why we need <code class="language-plaintext highlighter-rouge">Validator</code> as a interface and then implement the <code class="language-plaintext highlighter-rouge">isValid</code> method afterwards.</ul><blockquote><p>For Reflection API usage, <a href="https://docs.oracle.com/javase/tutorial/reflect/">Here</a> is the documentation you can look into.</p><p><code class="language-plaintext highlighter-rouge">ViolationException</code> will be included in the end of this post.</p></blockquote><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
</pre><td class="rouge-code"><pre>    <span class="kd">public</span> <span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nc">Collection</span><span class="o">&lt;</span><span class="nc">ViolationException</span><span class="o">&gt;</span> <span class="nf">validate</span><span class="o">(</span><span class="no">T</span> <span class="n">object</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Field</span><span class="o">[]</span> <span class="n">fields</span><span class="o">;</span>
        <span class="nc">Annotation</span><span class="o">[]</span> <span class="n">annotations</span><span class="o">;</span>

        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">ViolationException</span><span class="o">&gt;</span> <span class="n">violationList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedList</span><span class="o">&lt;&gt;();</span>

        <span class="n">fields</span> <span class="o">=</span> <span class="n">object</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getDeclaredFields</span><span class="o">();</span>
        <span class="c1">// For each field.</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Field</span> <span class="n">field</span> <span class="o">:</span> <span class="n">fields</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(!</span><span class="n">field</span><span class="o">.</span><span class="na">trySetAccessible</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">violationList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span>
                        <span class="k">new</span> <span class="nc">ViolationException</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
                                <span class="o">.</span><span class="na">object</span><span class="o">(</span><span class="n">object</span><span class="o">)</span>
                                <span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="n">field</span><span class="o">)</span>
                                <span class="o">.</span><span class="na">reason</span><span class="o">(</span><span class="s">"Fails to access object's field."</span><span class="o">)</span>
                <span class="o">);</span>
                <span class="k">continue</span><span class="o">;</span>
            <span class="o">}</span>

            <span class="n">annotations</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="na">getDeclaredAnnotations</span><span class="o">();</span>
            <span class="c1">// For each field's annotation</span>
            <span class="k">for</span> <span class="o">(</span><span class="nc">Annotation</span> <span class="n">annotation</span> <span class="o">:</span> <span class="n">annotations</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="c1">// Annotation's annotation. Locate the @ValidateBy annotation declared</span>
                    <span class="c1">// on the corresponding annotation. This will lead us to the</span>
                    <span class="c1">// Validator Class we assigned.</span>
                    <span class="nc">ValidateBy</span> <span class="n">validateBy</span> <span class="o">=</span> <span class="n">annotation</span><span class="o">.</span><span class="na">annotationType</span><span class="o">().</span><span class="na">getDeclaredAnnotation</span><span class="o">(</span><span class="nc">ValidateBy</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">validateBy</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// No Validator Class is assigned.</span>
                        <span class="k">continue</span><span class="o">;</span>
                    <span class="o">}</span>
                    <span class="c1">// Retrieve the validator class assigned from the corresponding annotation by @ValidateBy(clazz=?)</span>
                    <span class="nc">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">Validator</span><span class="o">&lt;?&gt;&gt;</span> <span class="n">assignedValidator</span> <span class="o">=</span> <span class="n">validateBy</span><span class="o">.</span><span class="na">clazz</span><span class="o">();</span>
                    <span class="c1">// Prepare the Method for validation of the exact validator class provided at @ValidateBy</span>
                    <span class="nc">Method</span> <span class="n">validationMethod</span> <span class="o">=</span> <span class="n">assignedValidator</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="s">"isValid"</span><span class="o">,</span> <span class="n">field</span><span class="o">.</span><span class="na">getType</span><span class="o">());</span>
                    <span class="n">validationMethod</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
                    <span class="c1">// Construct a instance of the exact Validator using Reflection for method invoke usage.</span>
                    <span class="c1">// e.g: Ipv4AdressValidatorImpl::new</span>
                    <span class="nc">Validator</span> <span class="n">validator</span> <span class="o">=</span> <span class="n">assignedValidator</span><span class="o">.</span><span class="na">getDeclaredConstructor</span><span class="o">().</span><span class="na">newInstance</span><span class="o">();</span>
                    <span class="c1">// Invoke method and get the validation result</span>
                    <span class="kt">boolean</span> <span class="n">result</span> <span class="o">=</span> <span class="o">(</span><span class="kt">boolean</span><span class="o">)</span> <span class="n">validationMethod</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">validator</span><span class="o">,</span> <span class="n">field</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">object</span><span class="o">));</span>
                    <span class="c1">// Validation return false</span>
                    <span class="k">if</span> <span class="o">(!</span><span class="n">result</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">violationList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span>
                                <span class="k">new</span> <span class="nc">ViolationException</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
                                        <span class="o">.</span><span class="na">object</span><span class="o">(</span><span class="n">object</span><span class="o">)</span>
                                        <span class="o">.</span><span class="na">field</span><span class="o">(</span><span class="n">field</span><span class="o">)</span>
                                        <span class="o">.</span><span class="na">constraintAnnotation</span><span class="o">(</span><span class="n">annotation</span><span class="o">.</span><span class="na">annotationType</span><span class="o">())</span>
                                        <span class="o">.</span><span class="na">build</span><span class="o">()</span>
                        <span class="o">);</span>
                    <span class="o">}</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InvocationTargetException</span> <span class="o">|</span> <span class="nc">IllegalAccessException</span> <span class="o">|</span> <span class="nc">NoSuchMethodException</span> <span class="o">|</span> <span class="nc">InstantiationException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">violationList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span>
                            <span class="k">new</span> <span class="nc">ViolationException</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
                                    <span class="o">.</span><span class="na">object</span><span class="o">(</span><span class="n">object</span><span class="o">).</span><span class="na">field</span><span class="o">(</span><span class="n">field</span><span class="o">).</span><span class="na">reason</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getLocalizedMessage</span><span class="o">())</span>
                    <span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">violationList</span><span class="o">;</span>
    <span class="o">}</span>
</pre></table></code></div></div><h2 id="simple-test-drive">Simple Test-Drive<a href="#simple-test-drive" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><blockquote><p>Horizontal extendibility will be described in next chapter.</p></blockquote><p>Let’s write up a simple test case.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyQueryObject</span> <span class="o">{</span>
    <span class="nd">@Ipv4Address</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">ipRangeStart</span><span class="o">;</span>
    
    <span class="nd">@Ipv4Address</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">ipRangeStop</span><span class="o">;</span>
    
    <span class="nd">@Ipv4Address</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">proxyPoolAddress</span><span class="o">;</span>
	<span class="c1">// getter and setter</span>
<span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="nc">MyQueryObject</span> <span class="n">validObj</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MyQueryObject</span><span class="o">();</span>
<span class="n">validObj</span><span class="o">.</span><span class="na">setIpRangeStart</span><span class="o">(</span><span class="s">"10.0.0.1"</span><span class="o">);</span>
<span class="n">validObj</span><span class="o">.</span><span class="na">setIpRangeStop</span><span class="o">(</span><span class="s">"10.7.255.254"</span><span class="o">);</span>
<span class="n">validObj</span><span class="o">.</span><span class="na">setProxyPoolAddress</span><span class="o">(</span><span class="s">"172.17.0.1"</span><span class="o">);</span>

<span class="nc">MyQueryObject</span> <span class="n">invalidObj</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MyQueryObject</span><span class="o">();</span>
<span class="n">invalidObj</span><span class="o">.</span><span class="na">setIpRangeStart</span><span class="o">(</span><span class="s">"255.256.258.999"</span><span class="o">);</span>
<span class="n">invalidObj</span><span class="o">.</span><span class="na">setIpRangeStop</span><span class="o">(</span><span class="s">"172.18.1.1"</span><span class="o">);</span>
<span class="n">invalidObj</span><span class="o">.</span><span class="na">setProxyPoolAddress</span><span class="o">(</span><span class="s">"where 1=1"</span><span class="o">);</span>

<span class="nc">ValidationProvider</span> <span class="n">validationProvider</span> <span class="o">=</span> <span class="nc">ValidationProvider</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
        
<span class="c1">// Violation Count </span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">validationProvider</span><span class="o">.</span><span class="na">validate</span><span class="o">(</span><span class="n">validObj</span><span class="o">).</span><span class="na">size</span><span class="o">());</span>
<span class="c1">// Violation Output</span>
<span class="nc">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">validationProvider</span><span class="o">.</span><span class="na">validate</span><span class="o">(</span><span class="n">invalidObj</span><span class="o">));</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="mi">0</span>
<span class="o">[===&gt;</span> <span class="nc">Violation</span> <span class="o">&gt;</span> <span class="n">xyz</span><span class="o">.</span><span class="na">mijazz</span><span class="o">.</span><span class="na">springfreevalidation</span><span class="o">.</span><span class="na">objects</span><span class="o">.</span><span class="na">MyQueryObject</span><span class="o">.</span><span class="na">ipRangeStart</span> <span class="o">|</span> <span class="nd">@Ipv4Address</span>
<span class="o">,</span> <span class="o">===&gt;</span> <span class="nc">Violation</span> <span class="o">&gt;</span> <span class="n">xyz</span><span class="o">.</span><span class="na">mijazz</span><span class="o">.</span><span class="na">springfreevalidation</span><span class="o">.</span><span class="na">objects</span><span class="o">.</span><span class="na">MyQueryObject</span><span class="o">.</span><span class="na">proxyPoolAddress</span> <span class="o">|</span> <span class="nd">@Ipv4Address</span>
<span class="o">]</span>
</pre></table></code></div></div><p>Smoothly.</p><h2 id="horizontal-extendibility">Horizontal Extendibility<a href="#horizontal-extendibility" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><blockquote><p>Horizontal Extendibility in the post, specifically in plain words, means you can create your custom validation annotations as many as you want. For instance, I want to create <code class="language-plaintext highlighter-rouge">@Ipv6Adress</code>, <code class="language-plaintext highlighter-rouge">@FutureDatetime</code>, <code class="language-plaintext highlighter-rouge">@PastDatetime</code>, and then annotated them all inside one object.</p></blockquote><p><code class="language-plaintext highlighter-rouge">ValidationProvider</code> is designed to be applicable to various situation. In this case, we only need to create our annotation class annotated by <code class="language-plaintext highlighter-rouge">@ValidateBy(clazz=XXX)</code>, then a <code class="language-plaintext highlighter-rouge">XXXValidationImpl</code> implements <code class="language-plaintext highlighter-rouge">Validator</code>. and <strong>boom</strong> you are good to go. No need to alter code elsewhere.</p><h3 id="ipv6adress---step-1"><code class="language-plaintext highlighter-rouge">@Ipv6Adress</code> - Step 1<a href="#ipv6adress---step-1" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nd">@Target</span><span class="o">(</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">FIELD</span><span class="o">)</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@ValidateBy</span><span class="o">(</span><span class="n">clazz</span> <span class="o">=</span> <span class="nc">Ipv6AddressValidatorImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">Ipv6Address</span> <span class="o">{</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="ipv6addressvalidatorimpl---step-2"><code class="language-plaintext highlighter-rouge">Ipv6AddressValidatorImpl</code> - Step 2<a href="#ipv6addressvalidatorimpl---step-2" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Ipv6AddressValidatorImpl</span> <span class="kd">implements</span> <span class="nc">Validator</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="o">{</span>
    
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Pattern</span> <span class="n">v6Pattern</span> <span class="o">=</span> <span class="nc">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">"^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$"</span><span class="o">);</span>

    <span class="kd">public</span> <span class="nf">Ipv6AddressValidatorImpl</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Reflection's getDeclaredConstructor()</span>
    <span class="o">}</span>
	<span class="c1">// Implement Validator's method.</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isValid</span><span class="o">(</span><span class="nc">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">isValidIpv6Address</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isValidIpv6Address</span><span class="o">(</span><span class="nc">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">v6Pattern</span><span class="o">.</span><span class="na">matcher</span><span class="o">(</span><span class="n">value</span><span class="o">).</span><span class="na">matches</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="myv6queryobject---step-3"><code class="language-plaintext highlighter-rouge">MyV6QueryObject</code> - Step 3<a href="#myv6queryobject---step-3" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c1">// Mixed with Ipv4, Ipv6.</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyV6QueryObject</span> <span class="o">{</span>
    <span class="nd">@Ipv6Address</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">ipRangeStart</span><span class="o">;</span>
    <span class="nd">@Ipv6Address</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">ipRangeStop</span><span class="o">;</span>
    <span class="nd">@Ipv4Address</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">proxyPoolIp</span><span class="o">;</span>
    <span class="c1">// getters and setters</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Let’s write up a test case shall we.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nc">MyV6QueryObject</span> <span class="n">myV6QueryObject</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MyV6QueryObject</span><span class="o">();</span>
<span class="n">myV6QueryObject</span><span class="o">.</span><span class="na">setIpRangeStart</span><span class="o">(</span><span class="s">"fd0a:e481:6bf9:d049:0000:0000:0000:0000"</span><span class="o">);</span>
<span class="n">myV6QueryObject</span><span class="o">.</span><span class="na">setIpRangeStop</span><span class="o">(</span><span class="s">"fd0a:e481:6bf9:d049:?!*#:ff=ff:!*@3:ffff"</span><span class="o">);</span>
<span class="n">myV6QueryObject</span><span class="o">.</span><span class="na">setProxyPoolIp</span><span class="o">(</span><span class="s">"172.17.0.1"</span><span class="o">);</span>
</pre></table></code></div></div><p>use that same <code class="language-plaintext highlighter-rouge">ValidationProvider</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nc">ValidationProvider</span> <span class="n">validationProvider</span> <span class="o">=</span> <span class="nc">ValidationProvider</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">validationProvider</span><span class="o">.</span><span class="na">validate</span><span class="o">(</span><span class="n">myV6QueryObject</span><span class="o">));</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="o">[===&gt;</span> <span class="nc">Violation</span> <span class="o">&gt;</span> <span class="n">xyz</span><span class="o">.</span><span class="na">mijazz</span><span class="o">.</span><span class="na">springfreevalidation</span><span class="o">.</span><span class="na">objects</span><span class="o">.</span><span class="na">MyV6QueryObject</span><span class="o">.</span><span class="na">ipRangeStop</span> <span class="o">|</span> <span class="nd">@Ipv6Address</span>
<span class="o">]</span>
</pre></table></code></div></div><p>So the main idea of this chapter is that, you don’t have to bother yourself altering code inside that <code class="language-plaintext highlighter-rouge">ValidationProvider</code>. For horizontal development in the future, you just have to make your own annotation and implement corresponding <code class="language-plaintext highlighter-rouge">Validator</code>, and boom, you are good to go.</p><h3 id="extended-result">Extended Result<a href="#extended-result" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>I went ahead then finish the logic of <code class="language-plaintext highlighter-rouge">@FutureDatetime</code>, <code class="language-plaintext highlighter-rouge">@PastDatetime</code>. The result came back fine.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MixedQueryObject</span> <span class="o">{</span>
    <span class="nd">@Ipv4Address</span>
    <span class="nc">String</span> <span class="n">validIpv4</span><span class="o">;</span>
    <span class="nd">@Ipv4Address</span>
    <span class="nc">String</span> <span class="n">invalidIpv4</span><span class="o">;</span>
    <span class="nd">@Ipv6Address</span>
    <span class="nc">String</span> <span class="n">validIpv6</span><span class="o">;</span>
    <span class="nd">@Ipv6Address</span>
    <span class="nc">String</span> <span class="n">inValidIpv6</span><span class="o">;</span>
    <span class="nd">@FutureDatetime</span>
    <span class="nc">LocalDateTime</span> <span class="n">validFutureDt</span><span class="o">;</span>
    <span class="nd">@FutureDatetime</span>
    <span class="nc">LocalDateTime</span> <span class="n">invalidFutureDt</span><span class="o">;</span>
    <span class="nd">@PastDatetime</span>
    <span class="nc">LocalDateTime</span> <span class="n">validPastDt</span><span class="o">;</span>
    <span class="nd">@PastDatetime</span>
    <span class="nc">LocalDateTime</span> <span class="n">invalidPastDt</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="o">[===&gt;</span> <span class="nc">Violation</span> <span class="o">&gt;</span> <span class="n">xyz</span><span class="o">.</span><span class="na">mijazz</span><span class="o">.</span><span class="na">springfreevalidation</span><span class="o">.</span><span class="na">objects</span><span class="o">.</span><span class="na">MixedQueryObject</span><span class="o">.</span><span class="na">invalidIpv4</span> <span class="o">|</span> <span class="nd">@Ipv4Address</span>
<span class="o">,</span> <span class="o">===&gt;</span> <span class="nc">Violation</span> <span class="o">&gt;</span> <span class="n">xyz</span><span class="o">.</span><span class="na">mijazz</span><span class="o">.</span><span class="na">springfreevalidation</span><span class="o">.</span><span class="na">objects</span><span class="o">.</span><span class="na">MixedQueryObject</span><span class="o">.</span><span class="na">inValidIpv6</span> <span class="o">|</span> <span class="nd">@Ipv6Address</span>
<span class="o">,</span> <span class="o">===&gt;</span> <span class="nc">Violation</span> <span class="o">&gt;</span> <span class="n">xyz</span><span class="o">.</span><span class="na">mijazz</span><span class="o">.</span><span class="na">springfreevalidation</span><span class="o">.</span><span class="na">objects</span><span class="o">.</span><span class="na">MixedQueryObject</span><span class="o">.</span><span class="na">invalidFutureDt</span> <span class="o">|</span> <span class="nd">@FutureDatetime</span>
<span class="o">,</span> <span class="o">===&gt;</span> <span class="nc">Violation</span> <span class="o">&gt;</span> <span class="n">xyz</span><span class="o">.</span><span class="na">mijazz</span><span class="o">.</span><span class="na">springfreevalidation</span><span class="o">.</span><span class="na">objects</span><span class="o">.</span><span class="na">MixedQueryObject</span><span class="o">.</span><span class="na">invalidPastDt</span> <span class="o">|</span> <span class="nd">@PastDatetime</span>
<span class="o">]</span>
</pre></table></code></div></div><h2 id="conclusion">Conclusion<a href="#conclusion" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>At the time I wrote up this post, I was thinking that maybe adding a <code class="language-plaintext highlighter-rouge">nullable</code> feature will be helpful. After all, the whole idea of this post is to offer a way/possibility to validate object without using any Spring or Hibernate feature.</p><p>Although those frameworks do great or even excellent jobs at creating the things we need or use in our dev career, it’s still worth having a look inside to figure out how that actually works and manage to achieve it without using them. At the end of the day, I PREFER NOT use framework only to do the FARMWORK.</p><p>MASSIVE shout out to <code class="language-plaintext highlighter-rouge">Effective Java - Third Edition</code> by Joshua Bloch.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/java/'>Java</a>, <a href='/categories/design/'>Design</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/java/" class="post-tag no-text-decoration" >java</a> <a href="/tags/reflection/" class="post-tag no-text-decoration" >reflection</a> <a href="/tags/annotation/" class="post-tag no-text-decoration" >annotation</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://telegram.me/share?text=Validate Object Using Reflection Inspired by Spring - Mijazz Chan&url=https://mijazzchan.github.io/posts/Validate-Object-Using-Reflection-Inspired-by-Spring/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://twitter.com/intent/tweet?text=Validate Object Using Reflection Inspired by Spring - Mijazz Chan&url=https://mijazzchan.github.io/posts/Validate-Object-Using-Reflection-Inspired-by-Spring/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://mijazzchan.github.io/posts/Validate-Object-Using-Reflection-Inspired-by-Spring/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="http://service.weibo.com/share/share.php?title=Validate Object Using Reflection Inspired by Spring - Mijazz Chan&url=https://mijazzchan.github.io/posts/Validate-Object-Using-Reflection-Inspired-by-Spring/" data-toggle="tooltip" data-placement="top" title="Weibo" target="_blank" rel="noopener" aria-label="Weibo"> <i class="fa-fw fab fa-weibo"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Documentation-for-cloudflare-ddns-edgeos/">Documentation for cloudflare-ddns-edgeos</a><li><a href="/posts/Utility-Functions-While-Leetcoding/">Some Utility Functions While Leetcoding</a><li><a href="/posts/Store-Multiple-Booleans-Using-Byte/">Store Multiple Booleans Using Single Variable</a><li><a href="/posts/Decision-Tree-Wine-Classification/">Decision Tree Wine Classification</a><li><a href="/posts/From-Spring-Boot-Bean-Validation-to-Python-Wrapper/">From Spring Boot Bean Validation to Python Wrapper</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/data/">data</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/notes/">notes</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/annotation/">annotation</a> <a class="post-tag" href="/tags/code/">code</a> <a class="post-tag" href="/tags/error/">error</a> <a class="post-tag" href="/tags/manjaro/">manjaro</a> <a class="post-tag" href="/tags/pandas/">pandas</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/From-Spring-Boot-Bean-Validation-to-Python-Wrapper/"><div class="card-body"> <em class="timeago small" date="2021-06-03 12:59:54 +0800" >Jun 3, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>From Spring Boot Bean Validation to Python Wrapper</h3><div class="text-muted small"><p> Keywords in this post are as follows. Spring Boot Bean Validation JSR-303/349/380: Bean Validation Related Topic JSR Java Annotation Processing Custom Annotation Java Reflection API (ja...</p></div></div></a></div><div class="card"> <a href="/posts/Try-Understanding-Lombok/"><div class="card-body"> <em class="timeago small" date="2020-12-09 16:49:56 +0800" >Dec 9, 2020</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Try Understanding Lombok</h3><div class="text-muted small"><p> Try Understanding Lombok What is Lombok Project Lombok MVN Repo 大概一年多以前我接触Sping Boot的设计模式时, 了解到Entity, Service, Repository, 等层次设计的时候, POJO什么的. 当时的项目用的是Spring Data JPA做的持久层, 中间经过几层的数据, 对象...</p></div></div></a></div><div class="card"> <a href="/posts/Store-Multiple-Booleans-Using-Byte/"><div class="card-body"> <em class="timeago small" date="2021-04-18 17:14:49 +0800" >Apr 18, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Store Multiple Booleans Using Single Variable</h3><div class="text-muted small"><p> Intro Inspired by a stackoverflow answer which is more than a decade old. StackOverflow-Answer1, StackOverflow - Answer2 @Jon Skeet there provide a way of measuring how much memory do byte, int a...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/From-Spring-Boot-Bean-Validation-to-Python-Wrapper/" class="btn btn-outline-primary" prompt="Older"><p>From Spring Boot Bean Validation to Python Wrapper</p></a> <a href="/posts/Some-Neat-Design-Patterns-Effective-Java-reading-notes/" class="btn btn-outline-primary" prompt="Newer"><p>Some Neat Design Patterns - Effective Java reading notes</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/MijazzChan">Mijazz Chan</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/data/">data</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/notes/">notes</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/annotation/">annotation</a> <a class="post-tag" href="/tags/code/">code</a> <a class="post-tag" href="/tags/error/">error</a> <a class="post-tag" href="/tags/manjaro/">manjaro</a> <a class="post-tag" href="/tags/pandas/">pandas</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
